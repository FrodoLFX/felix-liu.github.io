<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Felix Liu | Portfolio</title>
    <style>
        :root {
            /* Dark Mode (Default) */
            --bg-color: #050505;
            --card-bg: rgba(28, 28, 30, 0.6);
            --card-border: rgba(255, 255, 255, 0.1);
            --text-primary: #f5f5f7;
            --text-secondary: #86868b;
            --accent-blue: #2997ff;
            --accent-glow: rgba(41, 151, 255, 0.4);
            --nav-bg: rgba(20, 20, 20, 0.8);
            --btn-bg: #fff;
            --btn-text: #000;
        }

        [data-theme="light"] {
            --bg-color: #f2f2f7;
            --card-bg: rgba(255, 255, 255, 0.65);
            --card-border: rgba(0, 0, 0, 0.1);
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --accent-blue: #0071e3;
            --accent-glow: rgba(0, 113, 227, 0.3);
            --nav-bg: rgba(255, 255, 255, 0.8);
            --btn-bg: #000;
            --btn-text: #fff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, sans-serif;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* --- UI CONTROLS --- */
        #theme-toggle {
            position: fixed; top: 25px; right: 25px;
            z-index: 1001;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            color: var(--text-primary);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            font-weight: 600;
            transition: transform 0.2s;
        }
        #theme-toggle:hover { transform: scale(1.05); }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 500px; height: 60px;
            background: var(--nav-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 50px;
            border: 1px solid var(--card-border);
            display: flex; justify-content: space-around; align-items: center;
            padding: 0 10px; z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .nav-item {
            color: var(--text-secondary);
            font-size: 0.9rem; font-weight: 500; cursor: pointer;
            padding: 8px 16px; border-radius: 30px;
            transition: all 0.3s;
        }
        .nav-item:hover { color: var(--text-primary); background: rgba(125,125,125,0.1); }
        .nav-item.active { color: #fff; background: var(--accent-blue); box-shadow: 0 0 15px var(--accent-glow); }

        /* --- HERO --- */
        #hero-wrapper {
            position: relative; height: 100vh; width: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            perspective: 1000px;
        }

        canvas#hologram-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; opacity: 0.8;
        }

        .hero-content {
            z-index: 2; text-align: center; pointer-events: none;
            mix-blend-mode: exclusion; /* Cool effect over the stars */
        }
        
        [data-theme="light"] .hero-content { mix-blend-mode: normal; }

        h1 {
            font-size: 5rem; font-weight: 800; letter-spacing: -0.03em;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .github-btn {
            pointer-events: auto;
            display: inline-block;
            margin-top: 20px;
            padding: 12px 30px;
            background: var(--btn-bg); color: var(--btn-text);
            text-decoration: none; font-weight: 600; border-radius: 30px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .github-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        /* --- BENTO GRID & JELLO CARDS --- */
        .container {
            max-width: 1100px; margin: 0 auto; padding: 100px 20px;
            display: none; opacity: 0; transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .container.visible { display: block; opacity: 1; transform: translateY(0); }

        .bento-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px; margin-top: 40px; perspective: 1000px; /* Essential for 3D */
        }

        .bento-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 28px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            /* The transition is handled by JS for the 'jello' feel, but we need base state */
            transform-style: preserve-3d;
            will-change: transform;
            cursor: default;
        }
        
        .bento-card h3 { font-size: 1.5rem; margin-bottom: 5px; color: var(--text-primary); }
        .bento-card h4 { font-size: 1rem; color: var(--accent-blue); margin-bottom: 15px; font-weight: 600; }
        .bento-card p, .bento-card ul { color: var(--text-secondary); line-height: 1.6; font-size: 0.95rem; }
        .bento-card ul { padding-left: 20px; margin-top: 10px; }
        .bento-card li { margin-bottom: 8px; }
        .bento-wide { grid-column: 1 / -1; }

        /* --- GAME SECTION --- */
        #game-wrapper {
            position: relative; width: 100%; height: 500px;
            background: #000; border-radius: 28px;
            border: 2px solid var(--accent-blue); overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 0 30px var(--accent-glow);
        }
        canvas#game-canvas { display: block; background: #000; cursor: crosshair; }
        #game-ui {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; background: rgba(0,0,0,0.85); padding: 40px; border-radius: 20px;
            backdrop-filter: blur(10px); border: 1px solid var(--accent-blue); color: #fff;
        }
        button.play-btn {
            background: var(--accent-blue); color: white; border: none;
            padding: 12px 30px; font-size: 1.2rem; border-radius: 30px;
            cursor: pointer; font-weight: 600; margin-top: 20px;
            transition: transform 0.2s;
        }
        button.play-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px var(--accent-glow); }

    </style>
</head>
<body data-theme="dark">

    <button id="theme-toggle" onclick="toggleTheme()">Light Mode</button>

    <nav>
        <div class="nav-item active" onclick="showSection('home')">Home</div>
        <div class="nav-item" onclick="showSection('work')">Work</div>
        <div class="nav-item" onclick="showSection('projects')">Projects</div>
        <div class="nav-item" onclick="showSection('game')">Game</div>
    </nav>

    <section id="home" class="visible">
        <div id="hero-wrapper">
            <canvas id="hologram-canvas"></canvas>
            <div class="hero-content">
                <h1>Fangxin (Felix) Liu</h1>
                <p style="font-size: 1.5rem; color: var(--text-secondary);">System Integration & Firmware Engineer</p>
                <a href="https://github.com/FrodoLFX" target="_blank" class="github-btn">
                    Visit GitHub Profile
                </a>
            </div>
        </div>

        <div class="container visible">
             <div class="bento-grid">
                <div class="bento-card bento-wide">
                    <h3>About Me</h3>
                    <p>
                        I am a Computer & Systems Engineering student at <strong>Rensselaer Polytechnic Institute</strong>. 
                        My passion lies in the intersection of hardware and softwareâ€”specifically in firmware, FPGA development, and system integration. 
                        From testing microsecond-level safety fuses at <strong>Tesla</strong> to maintaining mainframes for New York State, I build robust, critical systems.
                    </p>
                </div>
                <div class="bento-card">
                    <h3>Education</h3>
                    <h4>Rensselaer Polytechnic Institute</h4>
                    <p>Dec 2026 | Troy, NY</p>
                    <p><strong>B.S. Computer & Systems Engineering</strong></p>
                    <p style="margin-top:10px; font-size:0.85rem;">Coursework: Advanced Hardware Design, Embedded Control, Computer Architecture, Operating Systems.</p>
                </div>
                <div class="bento-card">
                    <h3>Contact</h3>
                    <p><strong>Email:</strong> liuf8@rpi.edu</p>
                    <p><strong>Phone:</strong> +1 (347) 404-2110</p>
                    <p><strong>Loc:</strong> Troy, NY / New York, NY</p>
                </div>
            </div>
        </div>
    </section>

    <div id="work" class="container">
        <h2 style="text-align:center; font-size:3rem; margin-bottom:40px;">Professional Experience</h2>
        <div class="bento-grid">
            <div class="bento-card bento-wide">
                <h3>Tesla</h3>
                <h4>System Integration Engineer Intern | Jun 2024 - Sep 2024</h4>
                <ul>
                    <li>Executed 55+ system integration tests and 80+ microsecond-level e-fuse safety tests on Model Y.</li>
                    <li>Designed and implemented protection measures for electronic components, increasing safety rate by 50% in harsh environments.</li>
                    <li>Led development of low-voltage electronics bucks, validating 358 subsystem parts configurations.</li>
                    <li>Performed thermal tests for 60% of controllers, gathering 5000+ data sets for modeling.</li>
                </ul>
            </div>
            <div class="bento-card">
                <h3>Tesla</h3>
                <h4>Low Voltage Systems TPM Intern | Jan 2024 - May 2024</h4>
                <ul>
                    <li>Led construction of 7 infotainment bucks for e-call validation.</li>
                    <li>Managed Solar Chamber project, improving solar sensor accuracy by 30%.</li>
                    <li>Managed WEBOM system tracking 2000+ components.</li>
                </ul>
            </div>
            <div class="bento-card">
                <h3>NYS Office of IT Services</h3>
                <h4>Mainframe Development Intern | Feb 2023 - Dec 2023</h4>
                <ul>
                    <li>Maintained 24/7 Mainframe System serving all of New York State.</li>
                    <li>Led team to remediate 200+ deprecated system routines.</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="projects" class="container">
        <h2 style="text-align:center; font-size:3rem; margin-bottom:40px;">Research & Personal Projects</h2>
        <div class="bento-grid">
            
            <div class="bento-card bento-wide">
                <h3>Research Assistant</h3>
                <h4>RPI ECSE Department | Sep 2025 - Current</h4>
                <ul>
                    <li>Conducting research on GPU customized operation using C++ with CUDA and CUTLASS.</li>
                    <li>Researching Accelerated Computation using Python with PyTorch.</li>
                </ul>
            </div>

            <div class="bento-card">
                <h3>Ultrasonic Robotic Car</h3>
                <h4>Embedded Systems Project</h4>
                <p>Built a robotic car based on <strong>TI MSP-EXP432 "Launch Pad"</strong> and TI RSLK Embedded System.</p>
                <ul>
                    <li>Programmed motion sensing joystick based on Arduino-Leonardo.</li>
                    <li>Implemented autonomous navigation logic.</li>
                </ul>
            </div>

            <div class="bento-card">
                <h3>FPGA Development</h3>
                <h4>Hardware Design</h4>
                <p>Comprehensive FPGA design using Verilog/VHDL.</p>
                <ul>
                    <li>Developed Display Module, Comparator, Encoder, Decoder, and Full-Adder.</li>
                    <li>Designed a <strong>5-stage Pipeline RISC-V Processor</strong> supporting assembly programs.</li>
                </ul>
            </div>

            <div class="bento-card">
                <h3>IBM z/OS Open Source</h3>
                <h4>Rensselaer Center for Open Source</h4>
                <p>Contributed to z/OS open-source development in collaboration with IBM.</p>
                <p>Focus on modernizing mainframe utilities.</p>
            </div>
        </div>
    </div>

    <div id="game" class="container">
        <h2 style="text-align:center; margin-bottom:20px;">Packet Defender</h2>
        <div id="game-wrapper">
            <div id="game-ui">
                <h2>System Security Breach</h2>
                <p>Click to Shoot. Move Mouse to Aim.</p>
                <p>Don't let the red packets pass the firewall.</p>
                <button class="play-btn" onclick="initGame()">START DEFENSE</button>
            </div>
            <canvas id="game-canvas"></canvas>
        </div>
    </div>

    <script>
        // --- THEME TOGGLE ---
        function toggleTheme() {
            const body = document.body;
            const btn = document.getElementById('theme-toggle');
            if(body.getAttribute('data-theme') === 'dark') {
                body.setAttribute('data-theme', 'light');
                btn.innerText = "Dark Mode";
            } else {
                body.setAttribute('data-theme', 'dark');
                btn.innerText = "Light Mode";
            }
        }

        // --- SECTION SWITCHING ---
        function showSection(id) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeBtn = Array.from(document.querySelectorAll('.nav-item')).find(el => el.getAttribute('onclick').includes(id));
            if(activeBtn) activeBtn.classList.add('active');

            // Handle Visibility
            if (id === 'home') {
                document.getElementById('home').style.display = 'block';
                document.querySelectorAll('.container').forEach(el => {
                    if (el.parentElement.id !== 'home') el.classList.remove('visible');
                });
                setTimeout(() => document.querySelector('#home .container').classList.add('visible'), 100);
            } else {
                document.getElementById('home').style.display = 'none';
                document.querySelectorAll('body > .container').forEach(el => el.classList.remove('visible'));
                const target = document.getElementById(id);
                target.style.display = 'block';
                void target.offsetWidth; // Force Reflow
                target.classList.add('visible');
            }
            
            if(id === 'game') resizeGame();
            else gameRunning = false;
        }

        // --- 3D HOLOGRAM UNIVERSE ---
        const hCanvas = document.getElementById('hologram-canvas');
        const hCtx = hCanvas.getContext('2d');
        let hWidth, hHeight;
        let stars = [];
        let mouseX = 0, mouseY = 0;

        function resizeHologram() {
            hWidth = hCanvas.width = window.innerWidth;
            hHeight = hCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeHologram);
        window.addEventListener('mousemove', e => {
            mouseX = (e.clientX - hWidth/2) * 0.001;
            mouseY = (e.clientY - hHeight/2) * 0.001;
        });

        class Star {
            constructor() {
                this.x = (Math.random() - 0.5) * 2000;
                this.y = (Math.random() - 0.5) * 2000;
                this.z = (Math.random() - 0.5) * 2000;
                this.size = Math.random() * 2;
                this.color = Math.random() > 0.8 ? '#2997ff' : '#ffffff';
            }
            update() {
                // Rotation Matrix
                const cosX = Math.cos(mouseY); const sinX = Math.sin(mouseY);
                const cosY = Math.cos(mouseX); const sinY = Math.sin(mouseX);

                // Rotate Y
                let dx = this.x * cosY - this.z * sinY;
                let dz = this.z * cosY + this.x * sinY;
                this.x = dx; this.z = dz;

                // Rotate X
                let dy = this.y * cosX - this.z * sinX;
                dz = this.z * cosX + this.y * sinX;
                this.y = dy; this.z = dz;
            }
            draw() {
                // Projection
                let fov = 600;
                let scale = fov / (fov + this.z);
                if (scale < 0) return; // Behind camera

                let x2d = hWidth/2 + this.x * scale;
                let y2d = hHeight/2 + this.y * scale;

                hCtx.fillStyle = this.color;
                hCtx.beginPath();
                hCtx.arc(x2d, y2d, this.size * scale, 0, Math.PI * 2);
                hCtx.fill();
                
                // Connection lines for hologram effect
                if(Math.random() > 0.99) {
                    hCtx.strokeStyle = `rgba(41, 151, 255, ${0.2 * scale})`;
                    hCtx.beginPath();
                    hCtx.moveTo(hWidth/2, hHeight/2);
                    hCtx.lineTo(x2d, y2d);
                    hCtx.stroke();
                }
            }
        }

        function initHologram() {
            resizeHologram();
            stars = [];
            for(let i=0; i<400; i++) stars.push(new Star());
            animateHologram();
        }

        function animateHologram() {
            hCtx.fillStyle = document.body.getAttribute('data-theme') === 'dark' ? 'rgba(5,5,5,0.3)' : 'rgba(242,242,247,0.3)';
            hCtx.fillRect(0,0, hWidth, hHeight);
            
            stars.forEach(star => {
                star.update();
                star.draw();
            });
            requestAnimationFrame(animateHologram);
        }
        initHologram();

        // --- JELLO / BOUNCY CARD EFFECT ---
        const cards = document.querySelectorAll('.bento-card');
        
        cards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = ((y - centerY) / centerY) * -10; // Max 10deg rotation
                const rotateY = ((x - centerX) / centerX) * 10;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
                card.style.transition = 'transform 0.1s ease-out'; // Fast response
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
                card.style.transition = 'transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)'; // Bouncy spring back
            });
        });

        // --- UPGRADED GAME: PACKET DEFENDER ---
        const gCanvas = document.getElementById('game-canvas');
        const gCtx = gCanvas.getContext('2d');
        let gameRunning = false;
        let player = { x: 0, y: 0, s: 30 };
        let projectiles = [];
        let enemies = [];
        let particles = [];
        let score = 0;
        let spawnRate = 60;
        let frame = 0;

        function resizeGame() {
            const wrapper = document.getElementById('game-wrapper');
            gCanvas.width = wrapper.clientWidth;
            gCanvas.height = wrapper.clientHeight;
            player.y = gCanvas.height - 50;
        }

        gCanvas.addEventListener('mousemove', e => {
            const rect = gCanvas.getBoundingClientRect();
            player.x = e.clientX - rect.left - player.s/2;
        });

        gCanvas.addEventListener('click', () => {
            if(gameRunning) {
                projectiles.push({x: player.x + player.s/2, y: player.y, r: 4});
            }
        });

        function initGame() {
            document.getElementById('game-ui').style.display = 'none';
            resizeGame();
            projectiles = []; enemies = []; particles = [];
            score = 0; frame = 0;
            gameRunning = true;
            gameLoop();
        }

        function createExplosion(x, y, color) {
            for(let i=0; i<10; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random() - 0.5) * 5,
                    vy: (Math.random() - 0.5) * 5,
                    life: 30, color: color
                });
            }
        }

        function gameLoop() {
            if(!gameRunning) return;
            frame++;

            gCtx.fillStyle = 'rgba(0,0,0,0.2)';
            gCtx.fillRect(0,0, gCanvas.width, gCanvas.height);

            // Player
            gCtx.fillStyle = '#2997ff';
            gCtx.shadowBlur = 15; gCtx.shadowColor = '#2997ff';
            gCtx.fillRect(player.x, player.y, player.s, player.s);
            gCtx.shadowBlur = 0;

            // Projectiles
            gCtx.fillStyle = '#fff';
            projectiles.forEach((p, i) => {
                p.y -= 8;
                gCtx.beginPath(); gCtx.arc(p.x, p.y, p.r, 0, Math.PI*2); gCtx.fill();
                if(p.y < 0) projectiles.splice(i, 1);
            });

            // Enemies
            if(frame % spawnRate === 0) {
                enemies.push({
                    x: Math.random() * (gCanvas.width - 30),
                    y: -30, w: 30, h: 30, speed: Math.random() * 2 + 1
                });
                if(spawnRate > 20) spawnRate--;
            }

            enemies.forEach((e, i) => {
                e.y += e.speed;
                gCtx.fillStyle = '#ff3b30';
                gCtx.shadowBlur = 10; gCtx.shadowColor = '#ff3b30';
                gCtx.fillRect(e.x, e.y, e.w, e.h);
                gCtx.shadowBlur = 0;

                // Collision with Projectile
                projectiles.forEach((p, pi) => {
                    if(p.x > e.x && p.x < e.x + e.w && p.y > e.y && p.y < e.y + e.h) {
                        createExplosion(e.x + e.w/2, e.y + e.h/2, '#ff3b30');
                        enemies.splice(i, 1);
                        projectiles.splice(pi, 1);
                        score += 10;
                    }
                });

                // Game Over Condition
                if(e.y > gCanvas.height) {
                    gameRunning = false;
                    document.getElementById('game-ui').style.display = 'block';
                    document.querySelector('#game-ui h2').innerText = "BREACHED! SCORE: " + score;
                }
            });

            // Particles
            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy; p.life--;
                gCtx.fillStyle = p.color;
                gCtx.fillRect(p.x, p.y, 2, 2);
                if(p.life <= 0) particles.splice(i, 1);
            });

            // Score
            gCtx.fillStyle = '#fff';
            gCtx.font = "20px Arial";
            gCtx.fillText("Score: " + score, 20, 30);

            requestAnimationFrame(gameLoop);
        }

    </script>
</body>
</html>
